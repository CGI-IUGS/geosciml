<?xml version="1.0" encoding="UTF-8"?>
<as:AppSchemaDataAccess 
xmlns:as="http://www.geotools.org/app-schema" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.geotools.org/app-schema AppSchemaDataAccess.xsd">
	<namespaces>
		<Namespace>
			<prefix>gwml2</prefix>
			<uri>http://www.opengis.net/gwml-main/2.2</uri>
		</Namespace>
		<Namespace>
			<prefix>gml</prefix>
			<uri>http://www.opengis.net/gml/3.2</uri>
		</Namespace>
		<Namespace>
			<prefix>xlink</prefix>
			<uri>http://www.w3.org/1999/xlink</uri>
		</Namespace>
		<Namespace>
			<prefix>gmd</prefix>
			<uri>http://www.isotc211.org/2005/gmd</uri>
		</Namespace>
		<Namespace>
			<prefix>gco</prefix>
			<uri>http://www.isotc211.org/2005/gco</uri>
		</Namespace>
		<Namespace>
			<prefix>gsmlb</prefix>
			<uri>http://xmlns.geosciml.org/GeoSciML-Basic/4.0</uri>
		</Namespace>
		<Namespace>
			<prefix>gsmlx</prefix>
			<uri>http://xmlns.geosciml.org/GeoSciML-Extension/4.0</uri>
		</Namespace>
		<Namespace>
			<prefix>xsi</prefix>
			<uri>http://www.w3.org/2001/XMLSchema-instance</uri>
		</Namespace>
		<Namespace>
			<prefix>om</prefix>
			<uri>http://www.opengis.net/om/2.0</uri>
		</Namespace>
		<Namespace>
			<prefix>swe</prefix>
			<uri>http://www.opengis.net/swe/2.0</uri>
		</Namespace>
		<Namespace>
			<prefix>gwml2f</prefix>
			<uri>http://www.opengis.net/gwml-flow/2.2</uri>
		</Namespace>
		<Namespace>
			<prefix>gwml2c</prefix>
			<uri>http://www.opengis.net/gwml-constituent/2.2</uri>
		</Namespace>
		<Namespace>
			<prefix>gwml2w</prefix>
			<uri>http://www.opengis.net/gwml-well/2.2</uri>
		</Namespace>
		<Namespace>
			<prefix>gwml2wc</prefix>
			<uri>http://www.opengis.net/gwml-wellconstruction/2.2</uri>
		</Namespace>
		<Namespace>
			<prefix>sam</prefix>
			<uri>http://www.opengis.net/sampling/2.0</uri>
		</Namespace>
		<Namespace>
			<prefix>sams</prefix>
			<uri>http://www.opengis.net/samplingSpatial/2.0</uri>
		</Namespace>
		<Namespace>
			<prefix>spec</prefix>
			<uri>http://www.opengis.net/samplingSpecimen/2.0</uri>
		</Namespace>
	</namespaces>
	<includedTypes>
		<Include>gwml2_GW_UnitFluidProperty.xml</Include>
		<Include>gsml_relatedFeature.xml</Include>
	</includedTypes>
	<sourceDataStores>
		<DataStore>
			<id>datastore</id>
			<parameters>
				<Parameter>
					<name>dbtype</name>
					<value>${ngis.dbtype}</value>
				</Parameter>
				<Parameter>
					<name>jndiReferenceName</name>
					<value>${ngis.jndi}</value>
				</Parameter>
				<Parameter>
					<name>schema</name>
					<value>${ngis.schema}</value>
				</Parameter>
				<Parameter>
					<name>Expose primary keys</name>
					<value>true</value>
				</Parameter>
				<Parameter>
					<name>fetch size</name>
					<value>1000</value>
				</Parameter>
			</parameters>
		</DataStore>
	</sourceDataStores>
	<targetTypes>
		<FeatureType>
			<schemaUri>http://ngwd-bdnes.cits.nrcan.gc.ca/service/gwml/schemas/2.2/gwml2-main.xsd</schemaUri>
			<schemaUri>http://schemas.geosciml.org/geosciml/4.0/geoSciMLExtension.xsd</schemaUri>			
		</FeatureType>
	</targetTypes>
	<typeMappings>
		<FeatureTypeMapping>
			<sourceDataStore>datastore</sourceDataStore>
			<sourceType>gwml2_gw_aquifer</sourceType>
			<targetElement>gwml2:GW_Aquifer</targetElement>
			<attributeMappings>
				<AttributeMapping>
					<targetAttribute>gwml2:GW_Aquifer</targetAttribute>
					<idExpression>
						<OCQL>gml_id</OCQL>
					</idExpression>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gml:metaDataProperty/gml:GenericMetaData</targetAttribute>
					<targetAttributeNode>gmd:MD_Metadata_PropertyType</targetAttributeNode>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gml:metaDataProperty/gml:GenericMetaData/gmd:MD_Metadata/gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:organisationName</targetAttribute>
					<encodeIfEmpty>true</encodeIfEmpty>
					<ClientProperty>
						<name>gco:nilReason</name>
						<value>'unknown'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gml:metaDataProperty/gml:GenericMetaData/gmd:MD_Metadata/gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:contactInfo/gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:administrativeArea/gco:CharacterString
				        </targetAttribute>
					<sourceExpression>
						<OCQL>gmd_adminarea_gco_charstr</OCQL>
					</sourceExpression>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gml:metaDataProperty/gml:GenericMetaData/gmd:MD_Metadata/gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/gmd:CI_RoleCode</targetAttribute>
					<sourceExpression>
						<OCQL>'originator'</OCQL>
					</sourceExpression>
					<ClientProperty>
						<name>codeList</name>
						<value>'http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml'</value>
					</ClientProperty>
					<ClientProperty>
						<name>codeSpace</name>
						<value>'ISOTC211/19115'</value>
					</ClientProperty>
					<ClientProperty>
						<name>codeListValue</name>
						<value>'CI_RoleCode_originator'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gml:metaDataProperty/gml:GenericMetaData/gmd:MD_Metadata/gmd:dateStamp</targetAttribute>
					<encodeIfEmpty>true</encodeIfEmpty>
					<ClientProperty>
						<name>gco:nilReason</name>
						<value>'unknown'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gml:metaDataProperty/gml:GenericMetaData/gmd:MD_Metadata/gmd:identificationInfo</targetAttribute>
					<ClientProperty>
						<name>xlink:href</name>
						<value>'http://www.opengis.net/def/nil/OGC/0/unknown'</value>
					</ClientProperty>
					<ClientProperty>
						<name>xlink:title</name>
						<value>'unknown'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gml:description</targetAttribute>
					<sourceExpression>
						<OCQL>gml_description</OCQL>
					</sourceExpression>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gml:identifier</targetAttribute>
					<sourceExpression>
						<OCQL>strConCat('${ngis.feature}',gml_identifier)</OCQL>
					</sourceExpression>
					<ClientProperty>
						<name>codeSpace</name>
						<value>'${uri.codespace}'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gml:name</targetAttribute>
					<sourceExpression>
						<OCQL>gml_id</OCQL>
						<linkElement>GW_NAME</linkElement>
						<linkField>FEATURE_LINK[1]</linkField>
					</sourceExpression>
					<isMultiple>true</isMultiple>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gsmlb:observationMethod</targetAttribute>
					<ClientProperty>
						<name>xlink:href</name>
						<value>'${nil.unknown}'</value>
					</ClientProperty>
					<ClientProperty>
						<name>xlink:title</name>
						<value>'unknown'</value>
					</ClientProperty>
					<ClientProperty>
						<name>nilReason</name>
						<value>'unknown'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gsmlb:occurrence</targetAttribute>
					<ClientProperty>
						<name>xlink:href</name>
						<value>'${nil.unknown}'</value>
					</ClientProperty>
					<ClientProperty>
						<name>xlink:title</name>
						<value>'unknown'</value>
					</ClientProperty>
					<ClientProperty>
						<name>nilReason</name>
						<value>'unknown'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gsmlb:purpose</targetAttribute>
					<sourceExpression>
						<OCQL>'instance'</OCQL>
					</sourceExpression>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gsmlb:relatedFeature</targetAttribute>
					<sourceExpression>
						<OCQL>gml_id</OCQL>
						<linkElement>_gsmlb_relatedfeature</linkElement>
						<linkField>FEATURE_LINK</linkField>
					</sourceExpression>
					<isMultiple>true</isMultiple>
					<ClientProperty>
						<name>xlink:title</name>
						<value>relatedfeature_title</value>
					</ClientProperty>
					<ClientProperty>
						<name>xlink:href</name>
						<value>strConCat('${ngis.feature}',relatedfeature_href)</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gsmlb:classifier</targetAttribute>
					<ClientProperty>
						<name>xlink:href</name>
						<value>'${nil.unknown}'</value>
					</ClientProperty>
					<ClientProperty>
						<name>xlink:title</name>
						<value>'unknown'</value>
					</ClientProperty>
					<ClientProperty>
						<name>nilReason</name>
						<value>'unknown'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gsmlb:geologicUnitType</targetAttribute>
					<ClientProperty>
						<name>xlink:href</name>
						<value>'${gsml.hydrogeounit}'</value>
					</ClientProperty>
					<ClientProperty>
						<name>xlink:title</name>
						<value>'hydrogeologic unit'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gsmlb:rank</targetAttribute>
					<ClientProperty>
						<name>xlink:href</name>
						<value>'${nil.unknown}'</value>
					</ClientProperty>
					<ClientProperty>
						<name>xlink:title</name>
						<value>'unknown'</value>
					</ClientProperty>
					<ClientProperty>
						<name>nilReason</name>
						<value>'unknown'</value>
					</ClientProperty>
				</AttributeMapping>
				<!--##################-->
				<AttributeMapping>
					<targetAttribute>gsmlb:gbUnitDescription</targetAttribute> 
					<targetAttributeNode>gsmlx:GeologicUnitDescriptionPropertyType</targetAttributeNode> 
                </AttributeMapping>
                <AttributeMapping>
					<targetAttribute>gsmlb:gbUnitDescription/gsmlx:GeologicUnitDescription/gsmlx:unitThickness</targetAttribute>
					<sourceExpression>
						<linkElement>if_then_else(isNull(gsmlgu_thickness_lowervalue), toXlinkHref('${nil.missing}'), '_gsmlgu_unitthickness')</linkElement>
					</sourceExpression>
				</AttributeMapping>
                <AttributeMapping>
					<targetAttribute>gwml2:gwUnitMedia</targetAttribute>
					<ClientProperty>
						<name>xlink:href</name>
						<value>'${nil.unknown}'</value>
					</ClientProperty>
					<ClientProperty>
						<name>xlink:title</name>
						<value>'unknown'</value>
					</ClientProperty>
					<ClientProperty>
						<name>nilReason</name>
						<value>'unknown'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gwml2:gwUnitWaterBudget</targetAttribute>
					<ClientProperty>
						<name>xsi:nil</name>
						<value>'true'</value>
					</ClientProperty>
					<ClientProperty>
						<name>nilReason</name>
						<value>'unknown'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gwml2:gwUnitRecharge</targetAttribute>
					<ClientProperty>
						<name>xlink:href</name>
						<value>'${nil.unknown}'</value>
					</ClientProperty>
					<ClientProperty>
						<name>xlink:title</name>
						<value>'unknown'</value>
					</ClientProperty>
					<ClientProperty>
						<name>nilReason</name>
						<value>'unknown'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gwml2:gwUnitDischarge</targetAttribute>
					<ClientProperty>
						<name>xlink:href</name>
						<value>'${nil.unknown}'</value>
					</ClientProperty>
					<ClientProperty>
						<name>xlink:title</name>
						<value>'unknown'</value>
					</ClientProperty>
					<ClientProperty>
						<name>nilReason</name>
						<value>'unknown'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gwml2:gwUnitVulnerability</targetAttribute>
					<ClientProperty>
						<name>xlink:href</name>
						<value>'${nil.unknown}'</value>
					</ClientProperty>
					<ClientProperty>
						<name>xlink:title</name>
						<value>'unknown'</value>
					</ClientProperty>
					<ClientProperty>
						<name>nilReason</name>
						<value>'unknown'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gwml2:gwUnitFluidBody</targetAttribute>
					<sourceExpression>
						<OCQL>gml_id</OCQL>
						<linkElement>gwml2:GW_UnitFluidProperty</linkElement>
						<linkField>FEATURE_LINK</linkField>
					</sourceExpression>
					<isMultiple>true</isMultiple>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gwml2:gwUnitVoid</targetAttribute>
					<ClientProperty>
						<name>xlink:href</name>
						<value>'${nil.unknown}'</value>
					</ClientProperty>
					<ClientProperty>
						<name>xlink:title</name>
						<value>'unknown'</value>
					</ClientProperty>
					<ClientProperty>
						<name>nilReason</name>
						<value>'unknown'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gwml2:gwAquiferType</targetAttribute>
					<ClientProperty>
						<name>xlink:href</name>
						<value>strConCat('${ngis.feature}',gwaquifertype_href)</value>
					</ClientProperty>
					<ClientProperty>
						<name>xlink:title</name>
						<value>gwaquifertype_title</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gwml2:gwAquiferIsExploited</targetAttribute>
					<ClientProperty>
						<name>xsi:nil</name>
						<value>'true'</value>
					</ClientProperty>
					<ClientProperty>
						<name>nilReason</name>
						<value>'unknown'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gwml2:gwAquiferIsMain</targetAttribute>
					<ClientProperty>
						<name>xsi:nil</name>
						<value>'true'</value>
					</ClientProperty>
					<ClientProperty>
						<name>nilReason</name>
						<value>'unknown'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gwml2:gwConfiningBed</targetAttribute>
					<ClientProperty>
						<name>xlink:href</name>
						<value>'${nil.unknown}'</value>
					</ClientProperty>
					<ClientProperty>
						<name>xlink:title</name>
						<value>'unknown'</value>
					</ClientProperty>
					<ClientProperty>
						<name>nilReason</name>
						<value>'unknown'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gwml2:gwAquiferSystem[1]</targetAttribute>
					<ClientProperty>
						<name>xlink:title</name>
						<value>if_then_else(isNull(gwaquifersystem_hgc_title), Expression.NIL, 'gsml:CGI_TermValue')</value>
					</ClientProperty>
					<ClientProperty>
						<name>xlink:href</name>
						<value>if_then_else(isNull(gwaquifersystem_hgc_href),Expression.NIL,strConCat('${ngis.feature}',gwaquifersystem_hgc_href))</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>gwml2:gwAquiferSystem[2]</targetAttribute>
					<ClientProperty>
						<name>xlink:title</name>
						<value>gwaquifersystem_nafhgc_title</value>
					</ClientProperty>
					<ClientProperty>
						<name>xlink:href</name>
						<value>strConCat('${ngis.feature}',gwaquifersystem_nafhgc_href)</value>
					</ClientProperty>
				</AttributeMapping>
				<!-- ======================================== -->
				<!-- property that other features use to link to the GW_Aquifer feature  -->
				<AttributeMapping>
					<targetAttribute>FEATURE_LINK</targetAttribute>
					<sourceExpression>
						<OCQL>gml_id</OCQL>
					</sourceExpression>
				</AttributeMapping>
			</attributeMappings>
		</FeatureTypeMapping>
		<!-- ======================================== -->
		<!-- link to gml_name datastore for multiple gml:name -->
		<!-- Only delivers unique gml_name. need to deliver unique CodeSpace/Name combinations -->
		<FeatureTypeMapping>
			<mappingName>GW_NAME</mappingName>
			<sourceDataStore>datastore</sourceDataStore>
			<sourceType>gwml2_gml_name</sourceType>
			<targetElement>gml:name</targetElement>
			<attributeMappings>
				<AttributeMapping>
					<targetAttribute>gml:name</targetAttribute>
					<sourceExpression>
						<OCQL>gml_name</OCQL>
					</sourceExpression>
					<ClientProperty>
						<name>codeSpace</name>
						<value>strConCat('${ngis.codespace}',gml_name_codespace)</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>FEATURE_LINK[1]</targetAttribute>
					<sourceExpression>
						<OCQL>link_gw_feature_id</OCQL>
					</sourceExpression>
				</AttributeMapping>
			</attributeMappings>
		</FeatureTypeMapping>
		<!-- ======================================== -->
		<!-- link to gwml2_gw_aquifer datastore for gsmlgu:unitThickness -->
		<FeatureTypeMapping>
			<mappingName>_gsmlgu_unitthickness</mappingName>
			<sourceDataStore>datastore</sourceDataStore>
			<sourceType>gwml2_gw_aquifer</sourceType>
			<targetElement>swe:QuantityRange</targetElement>
			<attributeMappings>
				<AttributeMapping>
					<targetAttribute>swe:uom</targetAttribute>
					<ClientProperty><name>code</name><value>'m'</value></ClientProperty>
					<ClientProperty><name>xlink:href</name><value>'${uom.metre}'</value></ClientProperty>
					<ClientProperty><name>xlink:title</name><value>'metre'</value></ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>swe:value</targetAttribute>
					<sourceExpression><OCQL>strConCat(strConCat(gsmlgu_thickness_lowervalue,' '),gsmlgu_thickness_uppervalue)</OCQL></sourceExpression>
				</AttributeMapping>
			</attributeMappings>
		</FeatureTypeMapping>	
	</typeMappings>
</as:AppSchemaDataAccess>
